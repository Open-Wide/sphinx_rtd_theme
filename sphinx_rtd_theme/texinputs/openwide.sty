%
% openwide.sty
%
% Override configuration from sphinx.sty for OpenWide
%

\ProvidesPackage{openwide}[2015/07/17 LaTeX package (Open Wide)]

\usepackage[table]{xcolor}
\usepackage{sectsty}
\usepackage{tikz}
\usepackage{titlesec}
\usepackage{color}
\usepackage{colortbl}
\usepackage{eso-pic}
\usepackage{blindtext}
\usepackage{graphicx}
\usepackage{array}
\usepackage{booktabs}

%%%%%%%
% FONTS
%%%%%%%
% https://en.wikibooks.org/wiki/LaTeX/Fonts#Introduction
\renewcommand*\rmdefault{lmr}
\renewcommand*\sffamily{lmss}
\renewcommand*\ttfamily{lmtt}

\setlength{\headheight}{15pt}

%%%%%%%%%%
% COULEURS
%%%%%%%%%%
% http://latexcolor.com/

\definecolor{owgray}{HTML}{808080}
\definecolor{owblue}{HTML}{0C96C7}
\definecolor{owbgblue}{HTML}{0C96C7}
\definecolor{owbggray}{HTML}{F5F5F5}
\definecolor{owwhite}{HTML}{FFFFFF}
\definecolor{ownormal}{HTML}{000000}
\definecolor{owrowbgodd}{HTML}{F5F5F5}
\definecolor{owrowbgeven}{HTML}{FFFFFF}

\colorlet{TitleColor}{owblue}
\colorlet{NormalColor}{ownormal}
\colorlet{ChapterColor}{owwhite}
\colorlet{SectionColor}{owblue}
\colorlet{SubSectionColor}{owgray}
\colorlet{SubSubSectionColor}{owgray}
\colorlet{InnerLinkColor}{owblue}
\colorlet{OuterLinkColor}{owblue}

\colorlet{VerbatimColor}{owbggray}
\colorlet{VerbatimBorderColor}{owgray}

%%%%%%%%%
% TABLEAU
%%%%%%%%%

% alternate rowcolors for all tables
\let\oldtabular\tabular
\let\endoldtabular\endtabular
\renewenvironment{tabular}{\rowcolors{2}{owwhite}{owbggray}\oldtabular}{\endoldtabular}

% alternate rowcolors for all long-tables
\let\oldlongtable\longtable
\let\endoldlongtable\endlongtable
\renewenvironment{longtable}{\rowcolors{2}{owwhite}{owbggray}\oldlongtable} {
\endoldlongtable}

\colorlet{tableheadcolor}{owbgblue} % Table header colour = Blue
\newcommand{\headcol}{\rowcolor{tableheadcolor}} %
    % Command \topline consists of a (slightly modified) \toprule followed by a \heavyrule rule of colour tableheadcolor (hence, 2 separate rules)

% Array rules
\arrayrulecolor[HTML]{808080}
\setlength{\arrayrulewidth}{1.5pt}

% Centring longtable
\setlength{\LTleft}{-20cm plus -1fill}
\setlength{\LTright}{\LTleft}

\renewcommand{\arraystretch}{1.5}

%%%%%%%%%%%%%%%%%%%%%%%%%
% NUMÉROTATION DES TITRES
%%%%%%%%%%%%%%%%%%%%%%%%%
\setcounter{secnumdepth}{6}

%%%%%%%%%%%%%%%%%%
% STYLE DES TITRES
%%%%%%%%%%%%%%%%%%

%\newcommand*{\chapnumfont}{\normalfont\sffamily\huge\bfseries}

\def\thickhrulefill{\leavevmode \leaders \hrule height 1ex \hfill \kern \z@}
\def\@makechapterhead#1{%
    \reset@font
    \hbox{%
        \vbox{%
            \hsize=6em%
            \begin{tabular}{c}
                \rowcolor{owwhite} \scshape \strut \color{owbgblue} \@chapapp{} \\
                \rowcolor{owwhite} \colorbox{owbgblue}{\vbox{\hbox{\vbox to 1mm{}}\hbox{\color{white} \LARGE \bfseries \hspace{1mm}\thechapter\hspace{1mm}}\hbox{\vbox to 6em{}}}}%
            \end{tabular}%
            }%
        \vbox{%
            \advance\hsize by -6em
            \par
            \vskip 1em%
            \parbox{35em}{%
                \color{owbgblue} \Huge \scshape #1}%
            }%
        }%
    \vskip 20\p@
}
\def\@makeschapterhead#1{%
    \reset@font
    \hbox{%
        \vbox{%
            \hsize=6em%
            \begin{tabular}{c}
                %scshape \strut \color{owbgblue} \phantom{@chapapp{}} \\
                \colorbox{owbgblue}{\vbox{\hbox{\vbox to 1mm{}}\hbox{\color{white} \LARGE \bfseries \hspace{1mm}\phantom{\thechapter}\hspace{1mm}}\hbox{\vbox to 6em{}}}}%
            \end{tabular}%
            }%
        \vbox{%
            \advance\hsize by -6em
            \par
            \vskip 1em%
            %\hspace{0em}%
            \parbox{35em}{%
                \color{owbgblue} \Huge \scshape #1}%
            }%
        }%
    \vskip 20\p@
}


\renewcommand{\section}{%
    \@startsection%
    {section}% nom du titre
    {1}% niveau de titre
    {0em}% indentation
    {-3.5em\@plus 1em \@minus .2em}%  espace vertical avant
    {1em\@plus .2em}% espace vertical après
    {\normalfont\huge\bfseries\color{SectionColor}}%  allure du titre
}%

\renewcommand{\subsection}{%
    \@startsection%
    {subsection}%
    {2}%
    {1em}%
    {-2.5em\@plus 1em \@minus .2em}%
    {1em\@plus .2em}%
    {\normalfont\LARGE\bfseries\color{SubSectionColor}}%
}%

\renewcommand{\subsubsection}{%
    \@startsection%
    {subsubsection}%
    {3}%
    {2em}%
    {-2em\@plus 1em \@minus .2em}%
    {1em\@plus .2em}%
    {\normalfont\Large\bfseries\color{SubSubSectionColor}}%
}%

\renewcommand{\paragraph}{%
    \@startsection%
    {paragraph}%
    {5}%
    {3em}%
    {-\baselineskip}%
    {.5\baselineskip}%
    {\normalfont\normalsize\bfseries}%
}%

\renewcommand{\subparagraph}{%
    \@startsection%
    {subparagraph}%
    {6}%
    {3.5em}%
    {-\baselineskip}%
    {.5\baselineskip}%
    {\normalfont\normalsize\bfseries}%
}%

% Background on the top of the page
%\newcommand\chapterBox{%
%  \put(0,0){%
%    \parbox[b][\paperheight]{\paperwidth}{%
%      \color{SectionColor}\rule{\paperwidth}{11em} %*
%      \vfill
%    }
%}}

%%%%%
% TOC
%%%%%

\def\toclevel@subsubsubsection{4}
\def\toclevel@paragraph{5}
\def\toclevel@paragraph{6}
\def\l@subsubsubsection{\@dottedtocline{4}{7em}{4em}}
\def\l@paragraph{\@dottedtocline{5}{10em}{5em}}
\def\l@subparagraph{\@dottedtocline{6}{14em}{6em}}

